openapi: 3.0.0
info:
  title: APISIX Admin API
  description: >-
    APISIX Admin API is a RESTful API that allows you to create and manage
    APISIX resources.
  version: 3.3.0
servers:
  - url: http://localhost:5000
    description: Dev Environment  
tags:
  - name: Route
    description: |-
      A route defines a path to one or more upstream services.  
        
      See [Routes](/apisix/key-concepts/routes) for more information.

paths:
  /apisix/admin/routes:
    get:
      operationId: getAllRoutes
      summary: Get All Routes
      deprecated: false
      description: Get all configured routes.
      tags:
        - Route
      parameters: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  list:
                    type: array
                    items:
                      type: object
                      properties:
                        value:
                          properties:
                            desc:
                              maxLength: 256
                              type: string
                            update_time:
                              type: integer
                            create_time:
                              type: integer
                            plugin_config_id:
                              anyOf:
                                - type: string
                                  minLength: 1
                                  maxLength: 64
                                  pattern: ^[a-zA-Z0-9-_.]+$
                                - minimum: 1
                                  type: integer
                            status:
                              default: 1
                              type: integer
                              enum:
                                - 1
                                - 0
                              description: route status, 1 to enable, 0 to disable
                            id:
                              anyOf:
                                - type: string
                                  minLength: 1
                                  maxLength: 64
                                  pattern: ^[a-zA-Z0-9-_.]+$
                                - minimum: 1
                                  type: integer
                            enable_websocket:
                              type: boolean
                            service_id:
                              anyOf:
                                - type: string
                                  minLength: 1
                                  maxLength: 64
                                  pattern: ^[a-zA-Z0-9-_.]+$
                                - minimum: 1
                                  type: integer
                            methods:
                              items:
                                type: string
                                enum:
                                  - GET
                                  - POST
                                  - PUT
                                  - DELETE
                                  - PATCH
                                  - HEAD
                                  - OPTIONS
                                  - CONNECT
                                  - TRACE
                                  - PURGE
                                description: HTTP method
                              type: array
                              uniqueItems: true
                            hosts:
                              items:
                                type: string
                              type: array
                              minItems: 1
                              uniqueItems: true
                            remote_addrs:
                              items:
                                type: string
                                anyOf:
                                  - format: ipv4
                                    type: string
                                    title: IPv4
                                  - type: string
                                    title: IPv4/CIDR
                                    pattern: >-
                                      ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                                  - format: ipv6
                                    type: string
                                    title: IPv6
                                  - type: string
                                    title: IPv6/CIDR
                                    pattern: >-
                                      ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                                description: client IP
                              type: array
                              minItems: 1
                              uniqueItems: true
                            filter_func:
                              minLength: 10
                              type: string
                              pattern: ^function
                            vars:
                              type: array
                              items:
                                type: string
                            name:
                              type: string
                              maxLength: 100
                              minLength: 1
                            upstream_id:
                              anyOf:
                                - type: string
                                  minLength: 1
                                  maxLength: 64
                                  pattern: ^[a-zA-Z0-9-_.]+$
                                - minimum: 1
                                  type: integer
                            script_id:
                              anyOf:
                                - type: string
                                  minLength: 1
                                  maxLength: 64
                                  pattern: ^[a-zA-Z0-9-_.]+$
                                - minimum: 1
                                  type: integer
                            host:
                              type: string
                            priority:
                              default: 0
                              type: integer
                            upstream:
                              properties:
                                desc:
                                  maxLength: 256
                                  type: string
                                update_time:
                                  type: integer
                                key:
                                  type: string
                                  description: the key of chash for dynamic load balancing
                                retries:
                                  minimum: 0
                                  type: integer
                                retry_timeout:
                                  minimum: 0
                                  type: number
                                pass_host:
                                  default: pass
                                  type: string
                                  enum:
                                    - pass
                                    - node
                                    - rewrite
                                  description: mod of host passing
                                upstream_host:
                                  type: string
                                type:
                                  type: string
                                  default: roundrobin
                                  enum:
                                    - roundrobin
                                    - chash
                                    - ewma
                                    - least_conn
                                  description: Load balancing algorithm.
                                checks:
                                  properties:
                                    active:
                                      properties:
                                        port:
                                          type: integer
                                          minimum: 1
                                          maximum: 65535
                                        healthy:
                                          properties:
                                            http_statuses:
                                              uniqueItems: true
                                              items:
                                                type: integer
                                                minimum: 200
                                                maximum: 599
                                              type: array
                                              minItems: 1
                                              default:
                                                - 200
                                                - 302
                                            interval:
                                              type: integer
                                              minimum: 1
                                              default: 1
                                            successes:
                                              default: 2
                                              type: integer
                                              minimum: 1
                                              maximum: 254
                                          type: object
                                        http_path:
                                          default: /
                                          type: string
                                        https_verify_certificate:
                                          default: true
                                          type: boolean
                                        unhealthy:
                                          properties:
                                            interval:
                                              type: integer
                                              minimum: 1
                                              default: 1
                                            tcp_failures:
                                              default: 2
                                              type: integer
                                              minimum: 1
                                              maximum: 254
                                            timeouts:
                                              default: 3
                                              type: integer
                                              minimum: 1
                                              maximum: 254
                                            http_statuses:
                                              uniqueItems: true
                                              items:
                                                type: integer
                                                minimum: 200
                                                maximum: 599
                                              type: array
                                              minItems: 1
                                              default:
                                                - 429
                                                - 404
                                                - 500
                                                - 501
                                                - 502
                                                - 503
                                                - 504
                                                - 505
                                            http_failures:
                                              default: 5
                                              type: integer
                                              minimum: 1
                                              maximum: 254
                                          type: object
                                        req_headers:
                                          items:
                                            uniqueItems: true
                                            type: string
                                          type: array
                                          minItems: 1
                                        timeout:
                                          default: 1
                                          type: number
                                        type:
                                          enum:
                                            - http
                                            - https
                                            - tcp
                                          default: http
                                          type: string
                                        host:
                                          type: string
                                        concurrency:
                                          default: 10
                                          type: integer
                                      type: object
                                    passive:
                                      properties:
                                        healthy:
                                          properties:
                                            http_statuses:
                                              uniqueItems: true
                                              items:
                                                type: integer
                                                minimum: 200
                                                maximum: 599
                                              type: array
                                              minItems: 1
                                              default:
                                                - 200
                                                - 201
                                                - 202
                                                - 203
                                                - 204
                                                - 205
                                                - 206
                                                - 207
                                                - 208
                                                - 226
                                                - 300
                                                - 301
                                                - 302
                                                - 303
                                                - 304
                                                - 305
                                                - 306
                                                - 307
                                                - 308
                                            successes:
                                              default: 5
                                              type: integer
                                              minimum: 0
                                              maximum: 254
                                          type: object
                                        unhealthy:
                                          properties:
                                            http_statuses:
                                              uniqueItems: true
                                              items:
                                                type: integer
                                                minimum: 200
                                                maximum: 599
                                              type: array
                                              minItems: 1
                                              default:
                                                - 429
                                                - 500
                                                - 503
                                            http_failures:
                                              default: 5
                                              type: integer
                                              minimum: 0
                                              maximum: 254
                                            tcp_failures:
                                              default: 2
                                              type: integer
                                              minimum: 0
                                              maximum: 254
                                            timeouts:
                                              default: 7
                                              type: integer
                                              minimum: 0
                                              maximum: 254
                                          type: object
                                        type:
                                          enum:
                                            - http
                                            - https
                                            - tcp
                                          default: http
                                          type: string
                                      type: object
                                  type: object
                                  anyOf:
                                    - required:
                                        - active
                                    - required:
                                        - active
                                        - passive
                                hash_on:
                                  default: vars
                                  enum:
                                    - vars
                                    - header
                                    - cookie
                                    - consumer
                                    - vars_combinations
                                  type: string
                                name:
                                  type: string
                                  maxLength: 100
                                  minLength: 1
                                scheme:
                                  enum:
                                    - grpc
                                    - grpcs
                                    - http
                                    - https
                                    - tcp
                                    - tls
                                    - udp
                                    - kafka
                                  default: http
                                  description: Protocol to communicate with the upstream.
                                service_name:
                                  type: string
                                  maxLength: 256
                                  minLength: 1
                                keepalive_pool:
                                  properties:
                                    size:
                                      default: 320
                                      minimum: 1
                                      type: integer
                                    idle_timeout:
                                      default: 60
                                      minimum: 0
                                      type: number
                                    requests:
                                      default: 1000
                                      minimum: 1
                                      type: integer
                                  type: object
                                timeout:
                                  properties:
                                    connect:
                                      exclusiveMinimum: 0
                                      type: number
                                      minimum: 0
                                    read:
                                      exclusiveMinimum: 0
                                      type: number
                                      minimum: 0
                                    send:
                                      exclusiveMinimum: 0
                                      type: number
                                      minimum: 0
                                  type: object
                                  required:
                                    - connect
                                    - send
                                    - read
                                id:
                                  anyOf:
                                    - type: string
                                      minLength: 1
                                      maxLength: 64
                                      pattern: ^[a-zA-Z0-9-_.]+$
                                    - minimum: 1
                                      type: integer
                                discovery_type:
                                  type: string
                                  description: discovery type
                                labels:
                                  type: object
                                  patternProperties:
                                    .*:
                                      minLength: 1
                                      maxLength: 64
                                      pattern: ^\S+$
                                      type: string
                                      description: value of label
                                  description: Key-value pairs to specify attributes.
                                  properties: {}
                                discovery_args:
                                  properties:
                                    group_name:
                                      type: string
                                      description: group name
                                    namespace_id:
                                      type: string
                                      description: namespace id
                                  type: object
                                nodes:
                                  anyOf:
                                    - patternProperties:
                                        .*:
                                          type: integer
                                          minimum: 0
                                          description: weight of node
                                      type: object
                                    - items:
                                        properties:
                                          weight:
                                            type: integer
                                            minimum: 0
                                            description: weight of node
                                          port:
                                            type: integer
                                            minimum: 1
                                            description: port of node
                                          metadata:
                                            type: object
                                            description: metadata of node
                                          host:
                                            type: string
                                          priority:
                                            type: integer
                                            default: 0
                                            description: priority of node
                                        type: object
                                        required:
                                          - host
                                          - port
                                          - weight
                                      type: array
                                tls:
                                  properties:
                                    verify:
                                      type: boolean
                                      default: false
                                      description: >-
                                        Turn on server certificate verification,
                                        currently only kafka upstream is
                                        supported
                                    client_key:
                                      minLength: 128
                                      maxLength: 65536
                                      type: string
                                    client_cert:
                                      minLength: 128
                                      maxLength: 65536
                                      type: string
                                    client_cert_id:
                                      anyOf:
                                        - type: string
                                          minLength: 1
                                          maxLength: 64
                                          pattern: ^[a-zA-Z0-9-_.]+$
                                        - minimum: 1
                                          type: integer
                                  type: object
                                  dependencies:
                                    client_cert_id:
                                      not:
                                        required:
                                          - client_client
                                          - client_key
                                    client_cert:
                                      required:
                                        - client_key
                                      not:
                                        required:
                                          - client_cert_id
                                    client_key:
                                      required:
                                        - client_cert
                                      not:
                                        required:
                                          - client_cert_id
                                create_time:
                                  type: integer
                              type: object
                              oneOf:
                                - required:
                                    - nodes
                                - required:
                                    - service_name
                                    - discovery_type
                            plugins:
                              type: object
                              properties: {}
                            remote_addr:
                              type: string
                              anyOf:
                                - format: ipv4
                                  type: string
                                  title: IPv4
                                - type: string
                                  title: IPv4/CIDR
                                  pattern: >-
                                    ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                                - format: ipv6
                                  type: string
                                  title: IPv6
                                - type: string
                                  title: IPv6/CIDR
                                  pattern: >-
                                    ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                              description: client IP
                            labels:
                              type: object
                              patternProperties:
                                .*:
                                  minLength: 1
                                  maxLength: 64
                                  pattern: ^\S+$
                                  type: string
                                  description: value of label
                              description: Key-value pairs to specify attributes.
                              properties: {}
                            timeout:
                              properties:
                                connect:
                                  exclusiveMinimum: 0
                                  type: number
                                  minimum: 0
                                read:
                                  exclusiveMinimum: 0
                                  type: number
                                  minimum: 0
                                send:
                                  exclusiveMinimum: 0
                                  type: number
                                  minimum: 0
                              type: object
                              required:
                                - connect
                                - send
                                - read
                            script:
                              minLength: 10
                              maxLength: 102400
                              type: string
                            uri:
                              minLength: 1
                              maxLength: 4096
                              type: string
                            uris:
                              items:
                                type: string
                                description: HTTP uri
                              type: array
                              minItems: 1
                              uniqueItems: true
                          type: object
                          anyOf:
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                            - type: string
                        key:
                          type: string
                        modifiedIndex:
                          type: integer
                        createdIndex:
                          type: integer
                      required:
                        - value
                        - key
                        - modifiedIndex
                        - createdIndex
                  total:
                    type: integer
              examples:
                '1':
                  summary: Successful Example
                  value:
                    total: 1
                    list:
                      - createdIndex: 203
                        key: /apisix/routes/1
                        value:
                          remote_addrs:
                            - 127.0.0.1
                          desc: desc
                          name: route-test
                          priority: 0
                          vars:
                            - - http_user
                              - '=='
                              - ios
                          update_time: 1684490006
                          create_time: 1684490006
                          id: '1'
                          plugins:
                            limit-count:
                              show_limit_quota_header: true
                              policy: local
                              count: 2
                              allow_degradation: false
                              rejected_code: 503
                              time_window: 60
                              key_type: var
                              key: remote_addr
                          status: 1
                          timeout:
                            read: 3
                            connect: 3
                            send: 3
                          uri: /ip
                          upstream:
                            hash_on: vars
                            pass_host: pass
                            nodes:
                              httpbin.org:80: 1
                            type: roundrobin
                            scheme: http
                          methods:
                            - GET
                            - POST
                          hosts:
                            - a.com
                            - b.com
                        modifiedIndex: 203
    post:
      operationId: createRoute
      summary: Create Route
      deprecated: false
      description: Create a route with an ID generated.
      tags:
        - Route
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              properties:
                desc:
                  maxLength: 256
                  type: string
                update_time:
                  type: integer
                create_time:
                  type: integer
                plugin_config_id:
                  anyOf:
                    - type: string
                      minLength: 1
                      maxLength: 64
                      pattern: ^[a-zA-Z0-9-_.]+$
                    - minimum: 1
                      type: integer
                status:
                  default: 1
                  type: integer
                  enum:
                    - 1
                    - 0
                  description: route status, 1 to enable, 0 to disable
                id:
                  anyOf:
                    - type: string
                      minLength: 1
                      maxLength: 64
                      pattern: ^[a-zA-Z0-9-_.]+$
                    - minimum: 1
                      type: integer
                enable_websocket:
                  type: boolean
                service_id:
                  anyOf:
                    - type: string
                      minLength: 1
                      maxLength: 64
                      pattern: ^[a-zA-Z0-9-_.]+$
                    - minimum: 1
                      type: integer
                methods:
                  items:
                    type: string
                    enum:
                      - GET
                      - POST
                      - PUT
                      - DELETE
                      - PATCH
                      - HEAD
                      - OPTIONS
                      - CONNECT
                      - TRACE
                      - PURGE
                    description: HTTP method
                  type: array
                  uniqueItems: true
                hosts:
                  items:
                    type: string
                  type: array
                  minItems: 1
                  uniqueItems: true
                remote_addrs:
                  items:
                    type: string
                    anyOf:
                      - format: ipv4
                        type: string
                        title: IPv4
                      - type: string
                        title: IPv4/CIDR
                        pattern: >-
                          ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                      - format: ipv6
                        type: string
                        title: IPv6
                      - type: string
                        title: IPv6/CIDR
                        pattern: >-
                          ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                    description: client IP
                  type: array
                  minItems: 1
                  uniqueItems: true
                filter_func:
                  minLength: 10
                  type: string
                  pattern: ^function
                vars:
                  type: array
                  items:
                    type: string
                name:
                  type: string
                  maxLength: 100
                  minLength: 1
                upstream_id:
                  anyOf:
                    - type: string
                      minLength: 1
                      maxLength: 64
                      pattern: ^[a-zA-Z0-9-_.]+$
                    - minimum: 1
                      type: integer
                script_id:
                  anyOf:
                    - type: string
                      minLength: 1
                      maxLength: 64
                      pattern: ^[a-zA-Z0-9-_.]+$
                    - minimum: 1
                      type: integer
                host:
                  type: string
                priority:
                  default: 0
                  type: integer
                upstream:
                  properties:
                    desc:
                      maxLength: 256
                      type: string
                    update_time:
                      type: integer
                    key:
                      type: string
                      description: the key of chash for dynamic load balancing
                    retries:
                      minimum: 0
                      type: integer
                    retry_timeout:
                      minimum: 0
                      type: number
                    pass_host:
                      default: pass
                      type: string
                      enum:
                        - pass
                        - node
                        - rewrite
                      description: mod of host passing
                    upstream_host:
                      type: string
                    type:
                      type: string
                      default: roundrobin
                      enum:
                        - roundrobin
                        - chash
                        - ewma
                        - least_conn
                      description: Load balancing algorithm.
                    checks:
                      properties:
                        active:
                          properties:
                            port:
                              type: integer
                              minimum: 1
                              maximum: 65535
                            healthy:
                              properties:
                                http_statuses:
                                  uniqueItems: true
                                  items:
                                    type: integer
                                    minimum: 200
                                    maximum: 599
                                  type: array
                                  minItems: 1
                                  default:
                                    - 200
                                    - 302
                                interval:
                                  type: integer
                                  minimum: 1
                                  default: 1
                                successes:
                                  default: 2
                                  type: integer
                                  minimum: 1
                                  maximum: 254
                              type: object
                            http_path:
                              default: /
                              type: string
                            https_verify_certificate:
                              default: true
                              type: boolean
                            unhealthy:
                              properties:
                                interval:
                                  type: integer
                                  minimum: 1
                                  default: 1
                                tcp_failures:
                                  default: 2
                                  type: integer
                                  minimum: 1
                                  maximum: 254
                                timeouts:
                                  default: 3
                                  type: integer
                                  minimum: 1
                                  maximum: 254
                                http_statuses:
                                  uniqueItems: true
                                  items:
                                    type: integer
                                    minimum: 200
                                    maximum: 599
                                  type: array
                                  minItems: 1
                                  default:
                                    - 429
                                    - 404
                                    - 500
                                    - 501
                                    - 502
                                    - 503
                                    - 504
                                    - 505
                                http_failures:
                                  default: 5
                                  type: integer
                                  minimum: 1
                                  maximum: 254
                              type: object
                            req_headers:
                              items:
                                uniqueItems: true
                                type: string
                              type: array
                              minItems: 1
                            timeout:
                              default: 1
                              type: number
                            type:
                              enum:
                                - http
                                - https
                                - tcp
                              default: http
                              type: string
                            host:
                              type: string
                            concurrency:
                              default: 10
                              type: integer
                          type: object
                        passive:
                          properties:
                            healthy:
                              properties:
                                http_statuses:
                                  uniqueItems: true
                                  items:
                                    type: integer
                                    minimum: 200
                                    maximum: 599
                                  type: array
                                  minItems: 1
                                  default:
                                    - 200
                                    - 201
                                    - 202
                                    - 203
                                    - 204
                                    - 205
                                    - 206
                                    - 207
                                    - 208
                                    - 226
                                    - 300
                                    - 301
                                    - 302
                                    - 303
                                    - 304
                                    - 305
                                    - 306
                                    - 307
                                    - 308
                                successes:
                                  default: 5
                                  type: integer
                                  minimum: 0
                                  maximum: 254
                              type: object
                            unhealthy:
                              properties:
                                http_statuses:
                                  uniqueItems: true
                                  items:
                                    type: integer
                                    minimum: 200
                                    maximum: 599
                                  type: array
                                  minItems: 1
                                  default:
                                    - 429
                                    - 500
                                    - 503
                                http_failures:
                                  default: 5
                                  type: integer
                                  minimum: 0
                                  maximum: 254
                                tcp_failures:
                                  default: 2
                                  type: integer
                                  minimum: 0
                                  maximum: 254
                                timeouts:
                                  default: 7
                                  type: integer
                                  minimum: 0
                                  maximum: 254
                              type: object
                            type:
                              enum:
                                - http
                                - https
                                - tcp
                              default: http
                              type: string
                          type: object
                      type: object
                      anyOf:
                        - required:
                            - active
                        - required:
                            - active
                            - passive
                    hash_on:
                      default: vars
                      enum:
                        - vars
                        - header
                        - cookie
                        - consumer
                        - vars_combinations
                      type: string
                    name:
                      type: string
                      maxLength: 100
                      minLength: 1
                    scheme:
                      enum:
                        - grpc
                        - grpcs
                        - http
                        - https
                        - tcp
                        - tls
                        - udp
                        - kafka
                      default: http
                      description: Protocol to communicate with the upstream.
                    service_name:
                      type: string
                      maxLength: 256
                      minLength: 1
                    keepalive_pool:
                      properties:
                        size:
                          default: 320
                          minimum: 1
                          type: integer
                        idle_timeout:
                          default: 60
                          minimum: 0
                          type: number
                        requests:
                          default: 1000
                          minimum: 1
                          type: integer
                      type: object
                    timeout:
                      properties:
                        connect:
                          exclusiveMinimum: 0
                          type: number
                        read:
                          exclusiveMinimum: 0
                          type: number
                        send:
                          exclusiveMinimum: 0
                          type: number
                      type: object
                      required:
                        - connect
                        - send
                        - read
                    id:
                      anyOf:
                        - type: string
                          minLength: 1
                          maxLength: 64
                          pattern: ^[a-zA-Z0-9-_.]+$
                        - minimum: 1
                          type: integer
                    discovery_type:
                      type: string
                      description: discovery type
                    labels:
                      type: object
                      patternProperties:
                        .*:
                          minLength: 1
                          maxLength: 64
                          pattern: ^\S+$
                          type: string
                          description: value of label
                      description: Key-value pairs to specify attributes.
                    discovery_args:
                      properties:
                        group_name:
                          type: string
                          description: group name
                        namespace_id:
                          type: string
                          description: namespace id
                      type: object
                    nodes:
                      anyOf:
                        - patternProperties:
                            .*:
                              type: integer
                              minimum: 0
                              description: weight of node
                          type: object
                        - items:
                            properties:
                              weight:
                                type: integer
                                minimum: 0
                                description: weight of node
                              port:
                                type: integer
                                minimum: 1
                                description: port of node
                              metadata:
                                type: object
                                description: metadata of node
                              host:
                                type: string
                              priority:
                                type: integer
                                default: 0
                                description: priority of node
                            type: object
                            required:
                              - host
                              - port
                              - weight
                          type: array
                    tls:
                      properties:
                        verify:
                          type: boolean
                          default: false
                          description: >-
                            Turn on server certificate verification, currently
                            only kafka upstream is supported
                        client_key:
                          minLength: 128
                          maxLength: 65536
                          type: string
                        client_cert:
                          minLength: 128
                          maxLength: 65536
                          type: string
                        client_cert_id:
                          anyOf:
                            - type: string
                              minLength: 1
                              maxLength: 64
                              pattern: ^[a-zA-Z0-9-_.]+$
                            - minimum: 1
                              type: integer
                      type: object
                      dependencies:
                        client_cert_id:
                          not:
                            required:
                              - client_client
                              - client_key
                        client_cert:
                          required:
                            - client_key
                          not:
                            required:
                              - client_cert_id
                        client_key:
                          required:
                            - client_cert
                          not:
                            required:
                              - client_cert_id
                    create_time:
                      type: integer
                  type: object
                  oneOf:
                    - required:
                        - nodes
                    - required:
                        - service_name
                        - discovery_type
                plugins:
                  type: object
                  properties: {}
                remote_addr:
                  type: string
                  anyOf:
                    - format: ipv4
                      type: string
                      title: IPv4
                    - type: string
                      title: IPv4/CIDR
                      pattern: >-
                        ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                    - format: ipv6
                      type: string
                      title: IPv6
                    - type: string
                      title: IPv6/CIDR
                      pattern: >-
                        ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                  description: client IP
                labels:
                  type: object
                  patternProperties:
                    .*:
                      minLength: 1
                      maxLength: 64
                      pattern: ^\S+$
                      type: string
                      description: value of label
                  description: Key-value pairs to specify attributes.
                timeout:
                  properties:
                    connect:
                      exclusiveMinimum: 0
                      type: number
                    read:
                      exclusiveMinimum: 0
                      type: number
                    send:
                      exclusiveMinimum: 0
                      type: number
                  type: object
                  required:
                    - connect
                    - send
                    - read
                script:
                  minLength: 10
                  maxLength: 102400
                  type: string
                uri:
                  minLength: 1
                  maxLength: 4096
                  type: string
                uris:
                  items:
                    type: string
                    description: HTTP uri
                  type: array
                  minItems: 1
                  uniqueItems: true
              type: object
              anyOf:
                - required:
                    - plugins
                    - uri
                - required:
                    - upstream
                    - uri
                - required:
                    - upstream_id
                    - uri
                - required:
                    - service_id
                    - uri
                - required:
                    - plugins
                    - uris
                - required:
                    - upstream
                    - uris
                - required:
                    - upstream_id
                    - uris
                - required:
                    - service_id
                    - uris
                - required:
                    - script
                    - uri
                - required:
                    - script
                    - uris
            example:
              name: route-name
              desc: desc
              hosts:
                - a.com
                - b.com
              methods:
                - GET
                - POST
              uri: /ip
              upstream:
                type: roundrobin
                nodes:
                  httpbin.org:80: 1
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  key:
                    type: string
                  value:
                    properties:
                      desc:
                        maxLength: 256
                        type: string
                      update_time:
                        type: integer
                      create_time:
                        type: integer
                      plugin_config_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      status:
                        default: 1
                        type: integer
                        enum:
                          - 1
                          - 0
                        description: route status, 1 to enable, 0 to disable
                      id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      enable_websocket:
                        type: boolean
                      service_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      methods:
                        items:
                          type: string
                          enum:
                            - GET
                            - POST
                            - PUT
                            - DELETE
                            - PATCH
                            - HEAD
                            - OPTIONS
                            - CONNECT
                            - TRACE
                            - PURGE
                          description: HTTP method
                        type: array
                        uniqueItems: true
                      hosts:
                        items:
                          type: string
                        type: array
                        minItems: 1
                        uniqueItems: true
                      remote_addrs:
                        items:
                          type: string
                          anyOf:
                            - format: ipv4
                              type: string
                              title: IPv4
                            - type: string
                              title: IPv4/CIDR
                              pattern: >-
                                ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                            - format: ipv6
                              type: string
                              title: IPv6
                            - type: string
                              title: IPv6/CIDR
                              pattern: >-
                                ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                          description: client IP
                        type: array
                        minItems: 1
                        uniqueItems: true
                      filter_func:
                        minLength: 10
                        type: string
                        pattern: ^function
                      vars:
                        type: array
                        items:
                          type: string
                      name:
                        type: string
                        maxLength: 100
                        minLength: 1
                      upstream_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      script_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      host:
                        type: string
                      priority:
                        default: 0
                        type: integer
                      upstream:
                        properties:
                          desc:
                            maxLength: 256
                            type: string
                          update_time:
                            type: integer
                          key:
                            type: string
                            description: the key of chash for dynamic load balancing
                          retries:
                            minimum: 0
                            type: integer
                          retry_timeout:
                            minimum: 0
                            type: number
                          pass_host:
                            default: pass
                            type: string
                            enum:
                              - pass
                              - node
                              - rewrite
                            description: mod of host passing
                          upstream_host:
                            type: string
                          type:
                            type: string
                            default: roundrobin
                            enum:
                              - roundrobin
                              - chash
                              - ewma
                              - least_conn
                            description: Load balancing algorithm.
                          checks:
                            properties:
                              active:
                                properties:
                                  port:
                                    type: integer
                                    minimum: 1
                                    maximum: 65535
                                  healthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 200
                                          - 302
                                      interval:
                                        type: integer
                                        minimum: 1
                                        default: 1
                                      successes:
                                        default: 2
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                    type: object
                                  http_path:
                                    default: /
                                    type: string
                                  https_verify_certificate:
                                    default: true
                                    type: boolean
                                  unhealthy:
                                    properties:
                                      interval:
                                        type: integer
                                        minimum: 1
                                        default: 1
                                      tcp_failures:
                                        default: 2
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                      timeouts:
                                        default: 3
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 429
                                          - 404
                                          - 500
                                          - 501
                                          - 502
                                          - 503
                                          - 504
                                          - 505
                                      http_failures:
                                        default: 5
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                    type: object
                                  req_headers:
                                    items:
                                      uniqueItems: true
                                      type: string
                                    type: array
                                    minItems: 1
                                  timeout:
                                    default: 1
                                    type: number
                                  type:
                                    enum:
                                      - http
                                      - https
                                      - tcp
                                    default: http
                                    type: string
                                  host:
                                    type: string
                                  concurrency:
                                    default: 10
                                    type: integer
                                type: object
                              passive:
                                properties:
                                  healthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 200
                                          - 201
                                          - 202
                                          - 203
                                          - 204
                                          - 205
                                          - 206
                                          - 207
                                          - 208
                                          - 226
                                          - 300
                                          - 301
                                          - 302
                                          - 303
                                          - 304
                                          - 305
                                          - 306
                                          - 307
                                          - 308
                                      successes:
                                        default: 5
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                    type: object
                                  unhealthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 429
                                          - 500
                                          - 503
                                      http_failures:
                                        default: 5
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                      tcp_failures:
                                        default: 2
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                      timeouts:
                                        default: 7
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                    type: object
                                  type:
                                    enum:
                                      - http
                                      - https
                                      - tcp
                                    default: http
                                    type: string
                                type: object
                            type: object
                            anyOf:
                              - required:
                                  - active
                              - required:
                                  - active
                                  - passive
                          hash_on:
                            default: vars
                            enum:
                              - vars
                              - header
                              - cookie
                              - consumer
                              - vars_combinations
                            type: string
                          name:
                            type: string
                            maxLength: 100
                            minLength: 1
                          scheme:
                            enum:
                              - grpc
                              - grpcs
                              - http
                              - https
                              - tcp
                              - tls
                              - udp
                              - kafka
                            default: http
                            description: Protocol to communicate with the upstream.
                          service_name:
                            type: string
                            maxLength: 256
                            minLength: 1
                          keepalive_pool:
                            properties:
                              size:
                                default: 320
                                minimum: 1
                                type: integer
                              idle_timeout:
                                default: 60
                                minimum: 0
                                type: number
                              requests:
                                default: 1000
                                minimum: 1
                                type: integer
                            type: object
                          timeout:
                            properties:
                              connect:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                              read:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                              send:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                            type: object
                            required:
                              - connect
                              - send
                              - read
                          id:
                            anyOf:
                              - type: string
                                minLength: 1
                                maxLength: 64
                                pattern: ^[a-zA-Z0-9-_.]+$
                              - minimum: 1
                                type: integer
                          discovery_type:
                            type: string
                            description: discovery type
                          labels:
                            type: object
                            patternProperties:
                              .*:
                                minLength: 1
                                maxLength: 64
                                pattern: ^\S+$
                                type: string
                                description: value of label
                            description: Key-value pairs to specify attributes.
                            properties: {}
                          discovery_args:
                            properties:
                              group_name:
                                type: string
                                description: group name
                              namespace_id:
                                type: string
                                description: namespace id
                            type: object
                          nodes:
                            anyOf:
                              - patternProperties:
                                  .*:
                                    type: integer
                                    minimum: 0
                                    description: weight of node
                                type: object
                              - items:
                                  properties:
                                    weight:
                                      type: integer
                                      minimum: 0
                                      description: weight of node
                                    port:
                                      type: integer
                                      minimum: 1
                                      description: port of node
                                    metadata:
                                      type: object
                                      description: metadata of node
                                    host:
                                      type: string
                                    priority:
                                      type: integer
                                      default: 0
                                      description: priority of node
                                  type: object
                                  required:
                                    - host
                                    - port
                                    - weight
                                type: array
                          tls:
                            properties:
                              verify:
                                type: boolean
                                default: false
                                description: >-
                                  Turn on server certificate verification,
                                  currently only kafka upstream is supported
                              client_key:
                                minLength: 128
                                maxLength: 65536
                                type: string
                              client_cert:
                                minLength: 128
                                maxLength: 65536
                                type: string
                              client_cert_id:
                                anyOf:
                                  - type: string
                                    minLength: 1
                                    maxLength: 64
                                    pattern: ^[a-zA-Z0-9-_.]+$
                                  - minimum: 1
                                    type: integer
                            type: object
                            dependencies:
                              client_cert_id:
                                not:
                                  required:
                                    - client_client
                                    - client_key
                              client_cert:
                                required:
                                  - client_key
                                not:
                                  required:
                                    - client_cert_id
                              client_key:
                                required:
                                  - client_cert
                                not:
                                  required:
                                    - client_cert_id
                          create_time:
                            type: integer
                        type: object
                        oneOf:
                          - required:
                              - nodes
                          - required:
                              - service_name
                              - discovery_type
                      plugins:
                        type: object
                        properties: {}
                      remote_addr:
                        type: string
                        anyOf:
                          - format: ipv4
                            type: string
                            title: IPv4
                          - type: string
                            title: IPv4/CIDR
                            pattern: >-
                              ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                          - format: ipv6
                            type: string
                            title: IPv6
                          - type: string
                            title: IPv6/CIDR
                            pattern: >-
                              ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                        description: client IP
                      labels:
                        type: object
                        patternProperties:
                          .*:
                            minLength: 1
                            maxLength: 64
                            pattern: ^\S+$
                            type: string
                            description: value of label
                        description: Key-value pairs to specify attributes.
                        properties: {}
                      timeout:
                        properties:
                          connect:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                          read:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                          send:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                        type: object
                        required:
                          - connect
                          - send
                          - read
                      script:
                        minLength: 10
                        maxLength: 102400
                        type: string
                      uri:
                        minLength: 1
                        maxLength: 4096
                        type: string
                      uris:
                        items:
                          type: string
                          description: HTTP uri
                        type: array
                        minItems: 1
                        uniqueItems: true
                    type: object
                    anyOf:
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
              examples:
                '1':
                  summary: Successful Example
                  value:
                    value:
                      desc: desc
                      name: route-name
                      update_time: 1684490245
                      priority: 0
                      id: '00000000000000000206'
                      status: 1
                      create_time: 1684490245
                      uri: /ip
                      upstream:
                        hash_on: vars
                        pass_host: pass
                        nodes:
                          httpbin.org:80: 1
                        type: roundrobin
                        scheme: http
                      methods:
                        - GET
                        - POST
                      hosts:
                        - a.com
                        - b.com
                    key: /apisix/routes/00000000000000000206
        '400':
          description: Invalid configuration
          content: {}
  /apisix/admin/routes/{id}:
    get:
      operationId: getRouteById
      summary: Get Route by ID
      deprecated: false
      description: Get a route by ID.
      tags:
        - Route
      parameters:
        - name: id
          in: path
          description: The route id
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  value:
                    properties:
                      desc:
                        maxLength: 256
                        type: string
                      update_time:
                        type: integer
                      create_time:
                        type: integer
                      plugin_config_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      status:
                        default: 1
                        type: integer
                        enum:
                          - 1
                          - 0
                        description: route status, 1 to enable, 0 to disable
                      id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      enable_websocket:
                        type: boolean
                      service_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      methods:
                        items:
                          type: string
                          enum:
                            - GET
                            - POST
                            - PUT
                            - DELETE
                            - PATCH
                            - HEAD
                            - OPTIONS
                            - CONNECT
                            - TRACE
                            - PURGE
                          description: HTTP method
                        type: array
                        uniqueItems: true
                      hosts:
                        items:
                          type: string
                        type: array
                        minItems: 1
                        uniqueItems: true
                      remote_addrs:
                        items:
                          type: string
                          anyOf:
                            - format: ipv4
                              type: string
                              title: IPv4
                            - type: string
                              title: IPv4/CIDR
                              pattern: >-
                                ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                            - format: ipv6
                              type: string
                              title: IPv6
                            - type: string
                              title: IPv6/CIDR
                              pattern: >-
                                ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                          description: client IP
                        type: array
                        minItems: 1
                        uniqueItems: true
                      filter_func:
                        minLength: 10
                        type: string
                        pattern: ^function
                      vars:
                        type: array
                        items:
                          type: string
                      name:
                        type: string
                        maxLength: 100
                        minLength: 1
                      upstream_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      script_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      host:
                        type: string
                      priority:
                        default: 0
                        type: integer
                      upstream:
                        properties:
                          desc:
                            maxLength: 256
                            type: string
                          update_time:
                            type: integer
                          key:
                            type: string
                            description: the key of chash for dynamic load balancing
                          retries:
                            minimum: 0
                            type: integer
                          retry_timeout:
                            minimum: 0
                            type: number
                          pass_host:
                            default: pass
                            type: string
                            enum:
                              - pass
                              - node
                              - rewrite
                            description: mod of host passing
                          upstream_host:
                            type: string
                          type:
                            type: string
                            default: roundrobin
                            enum:
                              - roundrobin
                              - chash
                              - ewma
                              - least_conn
                            description: Load balancing algorithm.
                          checks:
                            properties:
                              active:
                                properties:
                                  port:
                                    type: integer
                                    minimum: 1
                                    maximum: 65535
                                  healthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 200
                                          - 302
                                      interval:
                                        type: integer
                                        minimum: 1
                                        default: 1
                                      successes:
                                        default: 2
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                    type: object
                                  http_path:
                                    default: /
                                    type: string
                                  https_verify_certificate:
                                    default: true
                                    type: boolean
                                  unhealthy:
                                    properties:
                                      interval:
                                        type: integer
                                        minimum: 1
                                        default: 1
                                      tcp_failures:
                                        default: 2
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                      timeouts:
                                        default: 3
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 429
                                          - 404
                                          - 500
                                          - 501
                                          - 502
                                          - 503
                                          - 504
                                          - 505
                                      http_failures:
                                        default: 5
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                    type: object
                                  req_headers:
                                    items:
                                      uniqueItems: true
                                      type: string
                                    type: array
                                    minItems: 1
                                  timeout:
                                    default: 1
                                    type: number
                                  type:
                                    enum:
                                      - http
                                      - https
                                      - tcp
                                    default: http
                                    type: string
                                  host:
                                    type: string
                                  concurrency:
                                    default: 10
                                    type: integer
                                type: object
                              passive:
                                properties:
                                  healthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 200
                                          - 201
                                          - 202
                                          - 203
                                          - 204
                                          - 205
                                          - 206
                                          - 207
                                          - 208
                                          - 226
                                          - 300
                                          - 301
                                          - 302
                                          - 303
                                          - 304
                                          - 305
                                          - 306
                                          - 307
                                          - 308
                                      successes:
                                        default: 5
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                    type: object
                                  unhealthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 429
                                          - 500
                                          - 503
                                      http_failures:
                                        default: 5
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                      tcp_failures:
                                        default: 2
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                      timeouts:
                                        default: 7
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                    type: object
                                  type:
                                    enum:
                                      - http
                                      - https
                                      - tcp
                                    default: http
                                    type: string
                                type: object
                            type: object
                            anyOf:
                              - required:
                                  - active
                              - required:
                                  - active
                                  - passive
                          hash_on:
                            default: vars
                            enum:
                              - vars
                              - header
                              - cookie
                              - consumer
                              - vars_combinations
                            type: string
                          name:
                            type: string
                            maxLength: 100
                            minLength: 1
                          scheme:
                            enum:
                              - grpc
                              - grpcs
                              - http
                              - https
                              - tcp
                              - tls
                              - udp
                              - kafka
                            default: http
                            description: Protocol to communicate with the upstream.
                          service_name:
                            type: string
                            maxLength: 256
                            minLength: 1
                          keepalive_pool:
                            properties:
                              size:
                                default: 320
                                minimum: 1
                                type: integer
                              idle_timeout:
                                default: 60
                                minimum: 0
                                type: number
                              requests:
                                default: 1000
                                minimum: 1
                                type: integer
                            type: object
                          timeout:
                            properties:
                              connect:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                              read:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                              send:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                            type: object
                            required:
                              - connect
                              - send
                              - read
                          id:
                            anyOf:
                              - type: string
                                minLength: 1
                                maxLength: 64
                                pattern: ^[a-zA-Z0-9-_.]+$
                              - minimum: 1
                                type: integer
                          discovery_type:
                            type: string
                            description: discovery type
                          labels:
                            type: object
                            patternProperties:
                              .*:
                                minLength: 1
                                maxLength: 64
                                pattern: ^\S+$
                                type: string
                                description: value of label
                            description: Key-value pairs to specify attributes.
                            properties: {}
                          discovery_args:
                            properties:
                              group_name:
                                type: string
                                description: group name
                              namespace_id:
                                type: string
                                description: namespace id
                            type: object
                          nodes:
                            anyOf:
                              - patternProperties:
                                  .*:
                                    type: integer
                                    minimum: 0
                                    description: weight of node
                                type: object
                              - items:
                                  properties:
                                    weight:
                                      type: integer
                                      minimum: 0
                                      description: weight of node
                                    port:
                                      type: integer
                                      minimum: 1
                                      description: port of node
                                    metadata:
                                      type: object
                                      description: metadata of node
                                    host:
                                      type: string
                                    priority:
                                      type: integer
                                      default: 0
                                      description: priority of node
                                  type: object
                                  required:
                                    - host
                                    - port
                                    - weight
                                type: array
                          tls:
                            properties:
                              verify:
                                type: boolean
                                default: false
                                description: >-
                                  Turn on server certificate verification,
                                  currently only kafka upstream is supported
                              client_key:
                                minLength: 128
                                maxLength: 65536
                                type: string
                              client_cert:
                                minLength: 128
                                maxLength: 65536
                                type: string
                              client_cert_id:
                                anyOf:
                                  - type: string
                                    minLength: 1
                                    maxLength: 64
                                    pattern: ^[a-zA-Z0-9-_.]+$
                                  - minimum: 1
                                    type: integer
                            type: object
                            dependencies:
                              client_cert_id:
                                not:
                                  required:
                                    - client_client
                                    - client_key
                              client_cert:
                                required:
                                  - client_key
                                not:
                                  required:
                                    - client_cert_id
                              client_key:
                                required:
                                  - client_cert
                                not:
                                  required:
                                    - client_cert_id
                          create_time:
                            type: integer
                        type: object
                        oneOf:
                          - required:
                              - nodes
                          - required:
                              - service_name
                              - discovery_type
                      plugins:
                        type: object
                        properties: {}
                      remote_addr:
                        type: string
                        anyOf:
                          - format: ipv4
                            type: string
                            title: IPv4
                          - type: string
                            title: IPv4/CIDR
                            pattern: >-
                              ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                          - format: ipv6
                            type: string
                            title: IPv6
                          - type: string
                            title: IPv6/CIDR
                            pattern: >-
                              ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                        description: client IP
                      labels:
                        type: object
                        patternProperties:
                          .*:
                            minLength: 1
                            maxLength: 64
                            pattern: ^\S+$
                            type: string
                            description: value of label
                        description: Key-value pairs to specify attributes.
                        properties: {}
                      timeout:
                        properties:
                          connect:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                          read:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                          send:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                        type: object
                        required:
                          - connect
                          - send
                          - read
                      script:
                        minLength: 10
                        maxLength: 102400
                        type: string
                      uri:
                        minLength: 1
                        maxLength: 4096
                        type: string
                      uris:
                        items:
                          type: string
                          description: HTTP uri
                        type: array
                        minItems: 1
                        uniqueItems: true
                    type: object
                    anyOf:
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                  key:
                    type: string
                  modifiedIndex:
                    type: integer
                  createdIndex:
                    type: integer
              examples:
                '1':
                  summary: Successful Example
                  value:
                    createdIndex: 203
                    key: /apisix/routes/1
                    value:
                      remote_addrs:
                        - 127.0.0.1
                      desc: desc
                      name: route-test
                      priority: 0
                      vars:
                        - - http_user
                          - '=='
                          - ios
                      update_time: 1684490006
                      create_time: 1684490006
                      id: '1'
                      plugins:
                        limit-count:
                          show_limit_quota_header: true
                          policy: local
                          count: 2
                          allow_degradation: false
                          rejected_code: 503
                          time_window: 60
                          key_type: var
                          key: remote_addr
                      status: 1
                      timeout:
                        read: 3
                        connect: 3
                        send: 3
                      uri: /ip
                      upstream:
                        hash_on: vars
                        pass_host: pass
                        nodes:
                          httpbin.org:80: 1
                        type: roundrobin
                        scheme: http
                      methods:
                        - GET
                        - POST
                      hosts:
                        - a.com
                        - b.com
                    modifiedIndex: 203
        '404':
          description: Key not found
          content: {}
    
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  key:
                    type: string
                  value:
                    properties:
                      desc:
                        maxLength: 256
                        type: string
                      update_time:
                        type: integer
                      create_time:
                        type: integer
                      plugin_config_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      status:
                        default: 1
                        type: integer
                        enum:
                          - 1
                          - 0
                        description: route status, 1 to enable, 0 to disable
                      id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      enable_websocket:
                        type: boolean
                      service_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      methods:
                        items:
                          type: string
                          enum:
                            - GET
                            - POST
                            - PUT
                            - DELETE
                            - PATCH
                            - HEAD
                            - OPTIONS
                            - CONNECT
                            - TRACE
                            - PURGE
                          description: HTTP method
                        type: array
                        uniqueItems: true
                      hosts:
                        items:
                          type: string
                        type: array
                        minItems: 1
                        uniqueItems: true
                      remote_addrs:
                        items:
                          type: string
                          anyOf:
                            - format: ipv4
                              type: string
                              title: IPv4
                            - type: string
                              title: IPv4/CIDR
                              pattern: >-
                                ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                            - format: ipv6
                              type: string
                              title: IPv6
                            - type: string
                              title: IPv6/CIDR
                              pattern: >-
                                ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                          description: client IP
                        type: array
                        minItems: 1
                        uniqueItems: true
                      filter_func:
                        minLength: 10
                        type: string
                        pattern: ^function
                      vars:
                        type: array
                        items:
                          type: string
                      name:
                        type: string
                        maxLength: 100
                        minLength: 1
                      upstream_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      script_id:
                        anyOf:
                          - type: string
                            minLength: 1
                            maxLength: 64
                            pattern: ^[a-zA-Z0-9-_.]+$
                          - minimum: 1
                            type: integer
                      host:
                        type: string
                      priority:
                        default: 0
                        type: integer
                      upstream:
                        properties:
                          desc:
                            maxLength: 256
                            type: string
                          update_time:
                            type: integer
                          key:
                            type: string
                            description: the key of chash for dynamic load balancing
                          retries:
                            minimum: 0
                            type: integer
                          retry_timeout:
                            minimum: 0
                            type: number
                          pass_host:
                            default: pass
                            type: string
                            enum:
                              - pass
                              - node
                              - rewrite
                            description: mod of host passing
                          upstream_host:
                            type: string
                          type:
                            type: string
                            default: roundrobin
                            enum:
                              - roundrobin
                              - chash
                              - ewma
                              - least_conn
                            description: Load balancing algorithm.
                          checks:
                            properties:
                              active:
                                properties:
                                  port:
                                    type: integer
                                    minimum: 1
                                    maximum: 65535
                                  healthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 200
                                          - 302
                                      interval:
                                        type: integer
                                        minimum: 1
                                        default: 1
                                      successes:
                                        default: 2
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                    type: object
                                  http_path:
                                    default: /
                                    type: string
                                  https_verify_certificate:
                                    default: true
                                    type: boolean
                                  unhealthy:
                                    properties:
                                      interval:
                                        type: integer
                                        minimum: 1
                                        default: 1
                                      tcp_failures:
                                        default: 2
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                      timeouts:
                                        default: 3
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 429
                                          - 404
                                          - 500
                                          - 501
                                          - 502
                                          - 503
                                          - 504
                                          - 505
                                      http_failures:
                                        default: 5
                                        type: integer
                                        minimum: 1
                                        maximum: 254
                                    type: object
                                  req_headers:
                                    items:
                                      uniqueItems: true
                                      type: string
                                    type: array
                                    minItems: 1
                                  timeout:
                                    default: 1
                                    type: number
                                  type:
                                    enum:
                                      - http
                                      - https
                                      - tcp
                                    default: http
                                    type: string
                                  host:
                                    type: string
                                  concurrency:
                                    default: 10
                                    type: integer
                                type: object
                              passive:
                                properties:
                                  healthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 200
                                          - 201
                                          - 202
                                          - 203
                                          - 204
                                          - 205
                                          - 206
                                          - 207
                                          - 208
                                          - 226
                                          - 300
                                          - 301
                                          - 302
                                          - 303
                                          - 304
                                          - 305
                                          - 306
                                          - 307
                                          - 308
                                      successes:
                                        default: 5
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                    type: object
                                  unhealthy:
                                    properties:
                                      http_statuses:
                                        uniqueItems: true
                                        items:
                                          type: integer
                                          minimum: 200
                                          maximum: 599
                                        type: array
                                        minItems: 1
                                        default:
                                          - 429
                                          - 500
                                          - 503
                                      http_failures:
                                        default: 5
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                      tcp_failures:
                                        default: 2
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                      timeouts:
                                        default: 7
                                        type: integer
                                        minimum: 0
                                        maximum: 254
                                    type: object
                                  type:
                                    enum:
                                      - http
                                      - https
                                      - tcp
                                    default: http
                                    type: string
                                type: object
                            type: object
                            anyOf:
                              - required:
                                  - active
                              - required:
                                  - active
                                  - passive
                          hash_on:
                            default: vars
                            enum:
                              - vars
                              - header
                              - cookie
                              - consumer
                              - vars_combinations
                            type: string
                          name:
                            type: string
                            maxLength: 100
                            minLength: 1
                          scheme:
                            enum:
                              - grpc
                              - grpcs
                              - http
                              - https
                              - tcp
                              - tls
                              - udp
                              - kafka
                            default: http
                            description: Protocol to communicate with the upstream.
                          service_name:
                            type: string
                            maxLength: 256
                            minLength: 1
                          keepalive_pool:
                            properties:
                              size:
                                default: 320
                                minimum: 1
                                type: integer
                              idle_timeout:
                                default: 60
                                minimum: 0
                                type: number
                              requests:
                                default: 1000
                                minimum: 1
                                type: integer
                            type: object
                          timeout:
                            properties:
                              connect:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                              read:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                              send:
                                exclusiveMinimum: 0
                                type: number
                                minimum: 0
                            type: object
                            required:
                              - connect
                              - send
                              - read
                          id:
                            anyOf:
                              - type: string
                                minLength: 1
                                maxLength: 64
                                pattern: ^[a-zA-Z0-9-_.]+$
                              - minimum: 1
                                type: integer
                          discovery_type:
                            type: string
                            description: discovery type
                          labels:
                            type: object
                            patternProperties:
                              .*:
                                minLength: 1
                                maxLength: 64
                                pattern: ^\S+$
                                type: string
                                description: value of label
                            description: Key-value pairs to specify attributes.
                            properties: {}
                          discovery_args:
                            properties:
                              group_name:
                                type: string
                                description: group name
                              namespace_id:
                                type: string
                                description: namespace id
                            type: object
                          nodes:
                            anyOf:
                              - patternProperties:
                                  .*:
                                    type: integer
                                    minimum: 0
                                    description: weight of node
                                type: object
                              - items:
                                  properties:
                                    weight:
                                      type: integer
                                      minimum: 0
                                      description: weight of node
                                    port:
                                      type: integer
                                      minimum: 1
                                      description: port of node
                                    metadata:
                                      type: object
                                      description: metadata of node
                                    host:
                                      type: string
                                    priority:
                                      type: integer
                                      default: 0
                                      description: priority of node
                                  type: object
                                  required:
                                    - host
                                    - port
                                    - weight
                                type: array
                          tls:
                            properties:
                              verify:
                                type: boolean
                                default: false
                                description: >-
                                  Turn on server certificate verification,
                                  currently only kafka upstream is supported
                              client_key:
                                minLength: 128
                                maxLength: 65536
                                type: string
                              client_cert:
                                minLength: 128
                                maxLength: 65536
                                type: string
                              client_cert_id:
                                anyOf:
                                  - type: string
                                    minLength: 1
                                    maxLength: 64
                                    pattern: ^[a-zA-Z0-9-_.]+$
                                  - minimum: 1
                                    type: integer
                            type: object
                            dependencies:
                              client_cert_id:
                                not:
                                  required:
                                    - client_client
                                    - client_key
                              client_cert:
                                required:
                                  - client_key
                                not:
                                  required:
                                    - client_cert_id
                              client_key:
                                required:
                                  - client_cert
                                not:
                                  required:
                                    - client_cert_id
                          create_time:
                            type: integer
                        type: object
                        oneOf:
                          - required:
                              - nodes
                          - required:
                              - service_name
                              - discovery_type
                      plugins:
                        type: object
                        properties: {}
                      remote_addr:
                        type: string
                        anyOf:
                          - format: ipv4
                            type: string
                            title: IPv4
                          - type: string
                            title: IPv4/CIDR
                            pattern: >-
                              ^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$
                          - format: ipv6
                            type: string
                            title: IPv6
                          - type: string
                            title: IPv6/CIDR
                            pattern: >-
                              ^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$
                        description: client IP
                      labels:
                        type: object
                        patternProperties:
                          .*:
                            minLength: 1
                            maxLength: 64
                            pattern: ^\S+$
                            type: string
                            description: value of label
                        description: Key-value pairs to specify attributes.
                        properties: {}
                      timeout:
                        properties:
                          connect:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                          read:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                          send:
                            exclusiveMinimum: 0
                            type: number
                            minimum: 0
                        type: object
                        required:
                          - connect
                          - send
                          - read
                      script:
                        minLength: 10
                        maxLength: 102400
                        type: string
                      uri:
                        minLength: 1
                        maxLength: 4096
                        type: string
                      uris:
                        items:
                          type: string
                          description: HTTP uri
                        type: array
                        minItems: 1
                        uniqueItems: true
                    type: object
                    anyOf:
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
                      - type: string
              examples:
                '1':
                  summary: Update Upstream Node To The Route
                  value:
                    value:
                      remote_addrs:
                        - 127.0.0.1
                      desc: desc
                      name: route-test
                      priority: 0
                      vars:
                        - - http_user
                          - '=='
                          - ios
                      update_time: 1684490363
                      create_time: 1684490006
                      id: '1'
                      plugins:
                        limit-count:
                          show_limit_quota_header: true
                          policy: local
                          count: 2
                          allow_degradation: false
                          rejected_code: 503
                          time_window: 60
                          key_type: var
                          key: remote_addr
                      status: 1
                      timeout:
                        read: 3
                        connect: 3
                        send: 3
                      uri: /ip
                      upstream:
                        hash_on: vars
                        pass_host: pass
                        nodes:
                          httpbin.org:80: 1
                          127.0.0.1:1981: 1
                        type: roundrobin
                        scheme: http
                      methods:
                        - GET
                        - POST
                      hosts:
                        - a.com
                        - b.com
                    key: /apisix/routes/1
                '2':
                  summary: Delete An Upstream Node For The Route
                  value:
                    value:
                      remote_addrs:
                        - 127.0.0.1
                      desc: desc
                      name: route-test
                      vars:
                        - - http_user
                          - '=='
                          - ios
                      priority: 0
                      update_time: 1684490476
                      create_time: 1684490006
                      plugins:
                        limit-count:
                          show_limit_quota_header: true
                          policy: local
                          count: 2
                          key: remote_addr
                          rejected_code: 503
                          time_window: 60
                          key_type: var
                          allow_degradation: false
                      id: '1'
                      status: 1
                      uri: /ip
                      timeout:
                        connect: 3
                        read: 3
                        send: 3
                      upstream:
                        hash_on: vars
                        pass_host: pass
                        nodes:
                          httpbin.org:80: 1
                        type: roundrobin
                        scheme: http
                      methods:
                        - GET
                        - POST
                      hosts:
                        - a.com
                        - b.com
                    key: /apisix/routes/1
                '3':
                  summary: Disable Route
                  value:
                    value:
                      remote_addrs:
                        - 127.0.0.1
                      vars:
                        - - http_user
                          - '=='
                          - ios
                      name: route-test
                      desc: desc
                      priority: 0
                      update_time: 1684490503
                      create_time: 1684490006
                      id: '1'
                      plugins:
                        limit-count:
                          show_limit_quota_header: true
                          policy: local
                          count: 2
                          allow_degradation: false
                          rejected_code: 503
                          time_window: 60
                          key_type: var
                          key: remote_addr
                      status: 0
                      timeout:
                        read: 3
                        connect: 3
                        send: 3
                      uri: /ip
                      upstream:
                        hash_on: vars
                        pass_host: pass
                        nodes:
                          httpbin.org:80: 1
                        type: roundrobin
                        scheme: http
                      methods:
                        - GET
                        - POST
                      hosts:
                        - a.com
                        - b.com
                    key: /apisix/routes/1
        '400':
          description: Invalid configuration
          content: {}
        '404':
          description: Key not found
          content: {}